{% extends 'base.html' %}

{% block content %}

{% for message in get_flashed_messages() %}
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
{% endfor %}

{% if name %}
    <h1>Liste des Utilisateurs :</h1>
    <br><br>
    {% for user in users %}
    <table class="table table-hover table-bordered table-striped">
     
            <tr>
                <td>
                    ID n° {{ user.id }}. Utilisateur : <a href="{{ url_for('update', id=user.id)  }}">{{ user.username }}</a> - Nom : {{ user.name }} - Email : {{ user.email }} - <a href="{{ url_for('delete', id=user.id) }}">Supprimer</a>
                    <br>
                </td>
            </tr>
        
    </table>
    {% endfor %}  
{% else %}
    <h1>Ajouter nouvel utilisateur</h1>
    <br>
    <form method="POST">
        {{ form.hidden_tag() }}
        <br>
        {{ form.name.label(
            class="form-label") }}
        {{ form.name(
            class="form-control") }}
        <br>
        {{ form.username.label(
            class="form-label") }}
        {{ form.username(
            class="form-control") }}
        <br>
        {{ form.email.label(
            class="form-label") }}
        {{ form.email(
            class="form-control") }}
        <br>
        {{ form.password_hash.label(
            class="form-label") }}
        {{ form.password_hash(
            class="form-control") }}
        <br>
        {{ form.password_hash2.label(
            class="form-label") }}
        {{ form.password_hash2(
            class="form-control") }}
        <br>
        {{ form.submit(
            class="btn btn-secondary") }}
    </form>  
    <br><br>
 
<table class="table table-hover table-bordered table-striped">
    {% for user in users %}
        <tr>
            <td>
                ID n° {{ user.id }}. Utilisateur : <a href="{{ url_for('update', id=user.id)  }}">{{ user.username }}</a> - Nom : {{ user.name }} - Email : {{ user.email }} - <a href="{{ url_for('delete', id=user.id) }}">Supprimer</a>
                <br>
            </td>
        </tr>
    {% endfor %}
</table>
{% endif %}


{% endblock %}